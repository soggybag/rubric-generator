<!--  -->
<form>
  <div class="rubric-section aspect">
    
    <!-- ======================================= -->
    <!-- Section Column 0 -->
    <div class="rubric-section-score rubric-column level">
      <div>Total Column</div>
      <div>Description</div>
      <div>total value
        <span class="aspect-score"></span>
      </div>
    </div>

    <!-- Column 1 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="1">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="1">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 2 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="2">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="2">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 3 -->
    <div class="rubric-column">
      <label>
      <input type="checkbox" data-value="3">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="3">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 4 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="4">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="4">
        <span>Item 1</span>
      </label>
    </div>
  </div>

  <div class="rubric-section aspect">
    
    <!-- ======================================= -->
    <!-- Section Column 0 -->
    <div class="rubric-section-score rubric-column level">
      <div>Total Column</div>
      <div>Description</div>
      <div>total value
        <span class="aspect-score"></span>
      </div>
    </div>

    <!-- Column 1 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="1">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="1">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 2 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="2">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="2">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 3 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="3">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="3">
        <span>Item 1</span>
      </label>
    </div>

    <!-- Column 4 -->
    <div class="rubric-column">
      <label>
        <input type="checkbox" data-value="4">
        <span>Item 1</span>
      </label>
      <label>
        <input type="checkbox" data-value="4">
        <span>Item 1</span>
      </label>
    </div>
  </div>
  
  <div>
    Rubric Total Score: <span id="rubric-score"></span>
  </div>

</form>



<style>
  .rubric-section {
    display: flex;
    justify-content: center;
    border: 1px solid;
    margin: 0.5em;
  }

  .rubric-column {
    border: 1px solid;
    padding: 0.5em;
    margin: 0.5em;
  }

  .rubric-column>label {
    display: block;
  }

</style>



<script>
  // Handle updates and show score 
    
  // Get all checkboxes
  const checkBoxes = document.querySelectorAll('input[type=checkbox]');
  const rubricScore = document.getElementById('rubric-score');
  const aspects = document.querySelectorAll('.aspect');
  
  // const rowScores = document.querySelectorAll('row-score');
  
  // Add an event for each checkbox
  checkBoxes.forEach((cb) => {
    cb.addEventListener('change', (e) => {
      calculateScore();
    });
  });
  
  function getAspectScore() {
    aspects.forEach((a) => {
      const aspectCheckboxes = a.querySelectorAll('input[type=checkbox]')
      const aspectScore = a.querySelector('.aspect-score');

      let score = 0;
      console.log(aspectCheckboxes)
      aspectCheckboxes.forEach((cb) => {
        score += cb.checked ? Number(cb.dataset.value) : 0;
      });
      console.log(score)
      aspectScore.innerHTML = score;
    });  
  }
  
  function calculateScore() {
    let score = 0;
    checkBoxes.forEach((cb) => {
      score += cb.checked ? Number(cb.dataset.value) : 0;
    });
    // console.log(score);
    rubricScore.innerHTML = score;
    getAspectScore();
  }
  
  // 
  
  const sampleRubric = {
    title: 'Job readiness', 
    author: 'Braus', 
    rubric: [
      {title: 'Portfolio', columns: [
        {title: 'Beginner', score: 1, attributes: [
          'Portfolio is sparse', '3< live projects', 'projects just from tutorials']}, 
        {title: 'Initial Mastery', score: 2, attributes: [
          'Portfolio is live', '3+ live projects', 'Projects do not throw errors']}, 
        {title: 'Approaching Mastery', score: 3, attributes: [
          'Shows an array of original projects', 'Projects are navigable and unique', 'Code is available and easy to find']}, 
        {title: 'Mastery', score: 4, attributes: [
          'Projects are reactive and sophisticated', 'At least one project is of exceptional quality', 'Projects include in depth readme.']}
      ]}
    ]
  }
  
  
  
</script>
